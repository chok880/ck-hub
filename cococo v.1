-- üî• Ultimate Hack Hub UI + ESP/Hitbox + Ammo Infinite + No Recoil + Auto Fire

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local Player = Players.LocalPlayer
local Global = require(ReplicatedStorage.Libraries.Global)

-- ==========================
-- ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå
-- ==========================
local ESP_Enabled = false
local Hitbox_Enabled = false
local Ammo_Enabled = false
local NoRecoil_Enabled = false
local AutoFire_Enabled = false
local HitboxSize = 50 -- ‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô

-- ==========================
-- ‡∏ò‡∏µ‡∏°‡∏™‡∏µ‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏ï‡πà‡∏á‡πÑ‡∏î‡πâ
-- ==========================
local CurrentTheme = {
    name = "Cyber Punk",
    primary = Color3.fromRGB(0, 255, 255),    -- ‡∏™‡∏µ‡∏´‡∏•‡∏±‡∏Å
    secondary = Color3.fromRGB(255, 0, 255),  -- ‡∏™‡∏µ‡∏£‡∏≠‡∏á
    background = Color3.fromRGB(10, 10, 30),  -- ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
    surface = Color3.fromRGB(20, 20, 40),     -- ‡∏û‡∏∑‡πâ‡∏ô‡∏ú‡∏¥‡∏ß
    text = Color3.fromRGB(255, 255, 255),     -- ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
    accent = Color3.fromRGB(0, 200, 255)      -- ‡∏™‡∏µ‡πÄ‡∏ô‡πâ‡∏ô
}

local Themes = {
    ["Cyber Punk"] = {
        primary = Color3.fromRGB(0, 255, 255),
        secondary = Color3.fromRGB(255, 0, 255),
        background = Color3.fromRGB(10, 10, 30),
        surface = Color3.fromRGB(20, 20, 40),
        text = Color3.fromRGB(255, 255, 255),
        accent = Color3.fromRGB(0, 200, 255)
    },
    ["Neon Red"] = {
        primary = Color3.fromRGB(255, 20, 20),
        secondary = Color3.fromRGB(255, 100, 100),
        background = Color3.fromRGB(20, 10, 10),
        surface = Color3.fromRGB(40, 20, 20),
        text = Color3.fromRGB(255, 255, 255),
        accent = Color3.fromRGB(255, 50, 50)
    },
    ["Matrix Green"] = {
        primary = Color3.fromRGB(0, 255, 0),
        secondary = Color3.fromRGB(100, 255, 100),
        background = Color3.fromRGB(0, 10, 0),
        surface = Color3.fromRGB(10, 20, 10),
        text = Color3.fromRGB(255, 255, 255),
        accent = Color3.fromRGB(0, 200, 0)
    },
    ["Golden"] = {
        primary = Color3.fromRGB(255, 215, 0),
        secondary = Color3.fromRGB(255, 235, 100),
        background = Color3.fromRGB(30, 25, 0),
        surface = Color3.fromRGB(50, 40, 0),
        text = Color3.fromRGB(255, 255, 255),
        accent = Color3.fromRGB(255, 200, 0)
    },
    ["Purple Haze"] = {
        primary = Color3.fromRGB(138, 43, 226),
        secondary = Color3.fromRGB(186, 85, 211),
        background = Color3.fromRGB(20, 10, 30),
        surface = Color3.fromRGB(40, 20, 50),
        text = Color3.fromRGB(255, 255, 255),
        accent = Color3.fromRGB(147, 112, 219)
    }
}

-- ==========================
-- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Gun Config
-- ==========================
local function applyGunConfig()
    for _, gunFolder in pairs(ReplicatedStorage.Weapons.Guns:GetChildren()) do
        for _, gun in pairs(gunFolder:GetChildren()) do
            if gun:FindFirstChild("Configuration") then
                local Config = require(gun.Configuration)
                
                -- Ammo Infinite
                if Ammo_Enabled then
                    Config.maxAmmo = math.huge
                end

                -- No Recoil
                if NoRecoil_Enabled then
                    if Config.recoil then Config.recoil = 0 end
                    if Config.camKick then Config.camKick = 0 end
                    if Config.spread then Config.spread = 0 end
                    if Config.accuracy then Config.accuracy = 1 end
                end

                -- Auto Fire
                if AutoFire_Enabled then
                    Config.firemode = "automatic"
                    Config.automatic = true
                end
            end
        end
    end
end

-- ==========================
-- ESP Wallhack + Hitbox
-- ==========================
local function addESP(character, teamColor)
    if not character:FindFirstChild("ESP_Highlight") then
        local highlight = Instance.new("Highlight")
        highlight.Name = "ESP_Highlight"
        highlight.FillTransparency = 0.5
        highlight.OutlineTransparency = 0
        highlight.Parent = character

        if teamColor == "Blue" then
            highlight.FillColor = Color3.fromRGB(0, 120, 255)
        elseif teamColor == "Red" then
            highlight.FillColor = Color3.fromRGB(255, 60, 60)
        else
            highlight.FillColor = Color3.fromRGB(255, 255, 255)
        end
    end

    -- BillboardGui ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠ + HP
    if not character:FindFirstChild("ESP_Billboard") then
        local hrp = character:FindFirstChild("HumanoidRootPart")
        local hum = character:FindFirstChildOfClass("Humanoid")
        if hrp and hum then
            local billboard = Instance.new("BillboardGui")
            billboard.Name = "ESP_Billboard"
            billboard.Size = UDim2.new(0,120,0,40)
            billboard.Adornee = hrp
            billboard.AlwaysOnTop = true
            billboard.Parent = character

            local textLabel = Instance.new("TextLabel")
            textLabel.Size = UDim2.new(1,0,1,0)
            textLabel.BackgroundTransparency = 1
            textLabel.TextColor3 = Color3.fromRGB(255,255,255)
            textLabel.TextScaled = true
            textLabel.Parent = billboard
        end
    end
end

local function removeESP(character)
    local esp = character:FindFirstChild("ESP_Highlight")
    if esp then esp:Destroy() end
    local billboard = character:FindFirstChild("ESP_Billboard")
    if billboard then billboard:Destroy() end
end

local function updateESP()
    for _, v in pairs(Players:GetPlayers()) do
        if v ~= Player and v.Character then
            local hrp = v.Character:FindFirstChild("HumanoidRootPart")
            local hum = v.Character:FindFirstChildOfClass("Humanoid")
            if hrp and hum then
                if hum.Health > 0 then
                    if Global.Teams[v] ~= Global.Teams[Player] then
                        -- ‚úÖ ESP Toggle
                        if ESP_Enabled then
                            addESP(v.Character, Global.Teams[v])
                            local billboard = v.Character:FindFirstChild("ESP_Billboard")
                            if billboard then
                                billboard.TextLabel.Text = v.Name.." | HP: "..math.floor(hum.Health)
                            end
                        else
                            removeESP(v.Character)
                        end
                        -- ‚úÖ Hitbox Toggle
                        if Hitbox_Enabled then
                            hrp.Size = Vector3.new(HitboxSize,HitboxSize,HitboxSize)
                            hrp.CanCollide = false
                            hrp.Transparency = 0.5
                        else
                            hrp.Size = Vector3.new(2,2,1)
                            hrp.Transparency = 1
                            hrp.CanCollide = true
                        end
                    else
                        removeESP(v.Character)
                        hrp.Size = Vector3.new(2,2,1)
                        hrp.Transparency = 1
                        hrp.CanCollide = true
                    end
                else
                    removeESP(v.Character)
                    hrp.Size = Vector3.new(2,2,1)
                    hrp.Transparency = 1
                    hrp.CanCollide = true
                end
            end
        end
    end
end
RunService.RenderStepped:Connect(updateESP)

-- ==========================
-- üé® ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå UI
-- ==========================
local function createGlowEffect(frame)
    local glow = Instance.new("UIStroke")
    glow.Name = "UIGlow"
    glow.Thickness = 2
    glow.Color = CurrentTheme.primary
    glow.Transparency = 0.7
    glow.Parent = frame
    
    -- ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡∏û‡∏±‡∏•‡∏™‡πå
    local pulseConn
    pulseConn = RunService.Heartbeat:Connect(function()
        glow.Transparency = 0.3 + math.abs(math.sin(tick() * 3)) * 0.4
    end)
    
    return glow, pulseConn
end

local function applyThemeToUI(screenGui)
    for _, obj in pairs(screenGui:GetDescendants()) do
        if obj:IsA("Frame") then
            if obj.Name == "TitleFrame" then
                obj.BackgroundColor3 = CurrentTheme.primary
            elseif obj.Name:find("Button") then
                obj.BackgroundColor3 = CurrentTheme.surface
            else
                obj.BackgroundColor3 = CurrentTheme.background
            end
        elseif obj:IsA("TextButton") or obj:IsA("TextLabel") then
            obj.TextColor3 = CurrentTheme.text
        elseif obj:IsA("UIStroke") and obj.Name == "UIGlow" then
            obj.Color = CurrentTheme.primary
        elseif obj:IsA("TextBox") then
            obj.BackgroundColor3 = CurrentTheme.surface
            obj.TextColor3 = CurrentTheme.text
        end
    end
end

-- ==========================
-- üé® ‡∏™‡∏£‡πâ‡∏≤‡∏á UI Hack Hub ‡πÅ‡∏ö‡∏ö‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°
-- ==========================
local function createHub()
    -- ‡∏•‡∏ö UI ‡πÄ‡∏Å‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
    if Player.PlayerGui:FindFirstChild("HackHubUI") then
        Player.PlayerGui.HackHubUI:Destroy()
    end

    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "HackHubUI"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    ScreenGui.Parent = Player:WaitForChild("PlayerGui")

    -- ‡∏õ‡∏∏‡πà‡∏° C ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î (‡∏•‡∏≠‡∏¢‡πÑ‡∏î‡πâ)
    local ToggleButton = Instance.new("TextButton")
    ToggleButton.Name = "ToggleButton"
    ToggleButton.Size = UDim2.new(0, 60, 0, 60)
    ToggleButton.Position = UDim2.new(0, 20, 0.5, -30)
    ToggleButton.BackgroundColor3 = CurrentTheme.primary
    ToggleButton.Text = "üéÆ"
    ToggleButton.TextColor3 = CurrentTheme.text
    ToggleButton.TextScaled = true
    ToggleButton.ZIndex = 10
    ToggleButton.Parent = ScreenGui
    
    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(1, 0)
    toggleCorner.Parent = ToggleButton
    
    local toggleGlow, togglePulse = createGlowEffect(ToggleButton)

    -- Main Hub Frame
    local MainFrame = Instance.new("Frame")
    MainFrame.Name = "MainFrame"
    MainFrame.Size = UDim2.new(0, 350, 0, 500)
    MainFrame.Position = UDim2.new(0.5, -175, 0.5, -250)
    MainFrame.BackgroundColor3 = CurrentTheme.background
    MainFrame.Active = true
    MainFrame.Draggable = true
    MainFrame.Visible = false
    MainFrame.Parent = ScreenGui

    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = UDim.new(0, 15)
    mainCorner.Parent = MainFrame
    
    local mainGlow, mainPulse = createGlowEffect(MainFrame)

    -- Title Bar
    local TitleFrame = Instance.new("Frame")
    TitleFrame.Name = "TitleFrame"
    TitleFrame.Size = UDim2.new(1, 0, 0, 50)
    TitleFrame.BackgroundColor3 = CurrentTheme.primary
    TitleFrame.Parent = MainFrame
    
    local titleCorner = Instance.new("UICorner")
    titleCorner.CornerRadius = UDim.new(0, 15)
    titleCorner.Parent = TitleFrame

    local Title = Instance.new("TextLabel")
    Title.Size = UDim2.new(1, -60, 1, 0)
    Title.Position = UDim2.new(0, 10, 0, 0)
    Title.BackgroundTransparency = 1
    Title.Text = "üî• ULTIMATE HACK HUB"
    Title.TextColor3 = CurrentTheme.text
    Title.TextScaled = true
    Title.Font = Enum.Font.GothamBlack
    Title.Parent = TitleFrame

    local CloseButton = Instance.new("TextButton")
    CloseButton.Size = UDim2.new(0, 30, 0, 30)
    CloseButton.Position = UDim2.new(1, -40, 0.5, -15)
    CloseButton.BackgroundColor3 = CurrentTheme.secondary
    CloseButton.Text = "X"
    CloseButton.TextColor3 = CurrentTheme.text
    CloseButton.TextScaled = true
    CloseButton.Parent = TitleFrame
    
    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(1, 0)
    closeCorner.Parent = CloseButton

    -- Content Scrolling Frame
    local ContentFrame = Instance.new("ScrollingFrame")
    ContentFrame.Size = UDim2.new(1, -20, 1, -70)
    ContentFrame.Position = UDim2.new(0, 10, 0, 60)
    ContentFrame.BackgroundTransparency = 1
    ContentFrame.ScrollBarThickness = 5
    ContentFrame.ScrollBarImageColor3 = CurrentTheme.primary
    ContentFrame.CanvasSize = UDim2.new(0, 0, 0, 600)
    ContentFrame.Parent = MainFrame

    -- ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏° Toggle ‡πÅ‡∏ö‡∏ö‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°
    local function createPremiumToggle(name, description, yPos, callback)
        local toggleFrame = Instance.new("Frame")
        toggleFrame.Size = UDim2.new(1, 0, 0, 70)
        toggleFrame.Position = UDim2.new(0, 0, 0, yPos)
        toggleFrame.BackgroundColor3 = CurrentTheme.surface
        toggleFrame.Parent = ContentFrame
        
        local toggleCorner = Instance.new("UICorner")
        toggleCorner.CornerRadius = UDim.new(0, 10)
        toggleCorner.Parent = toggleFrame
        
        local toggleStroke = Instance.new("UIStroke")
        toggleStroke.Color = CurrentTheme.primary
        toggleStroke.Thickness = 1
        toggleStroke.Parent = toggleFrame

        local titleLabel = Instance.new("TextLabel")
        titleLabel.Size = UDim2.new(0.7, -10, 0, 30)
        titleLabel.Position = UDim2.new(0, 10, 0, 5)
        titleLabel.BackgroundTransparency = 1
        titleLabel.Text = name
        titleLabel.TextColor3 = CurrentTheme.text
        titleLabel.TextScaled = true
        titleLabel.TextXAlignment = Enum.TextXAlignment.Left
        titleLabel.Font = Enum.Font.GothamBold
        titleLabel.Parent = toggleFrame

        local descLabel = Instance.new("TextLabel")
        descLabel.Size = UDim2.new(0.7, -10, 0, 30)
        descLabel.Position = UDim2.new(0, 10, 0, 35)
        descLabel.BackgroundTransparency = 1
        descLabel.Text = description
        descLabel.TextColor3 = CurrentTheme.text
        descLabel.TextScaled = false
        descLabel.TextSize = 12
        descLabel.TextXAlignment = Enum.TextXAlignment.Left
        descLabel.TextTransparency = 0.3
        descLabel.Parent = toggleFrame

        local toggleButton = Instance.new("TextButton")
        toggleButton.Size = UDim2.new(0, 80, 0, 35)
        toggleButton.Position = UDim2.new(1, -90, 0.5, -17)
        toggleButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
        toggleButton.Text = "OFF"
        toggleButton.TextColor3 = CurrentTheme.text
        toggleButton.TextScaled = true
        toggleButton.Parent = toggleFrame
        
        local buttonCorner = Instance.new("UICorner")
        buttonCorner.CornerRadius = UDim.new(0, 8)
        buttonCorner.Parent = toggleButton
        
        local buttonStroke = Instance.new("UIStroke")
        buttonStroke.Color = CurrentTheme.text
        buttonStroke.Thickness = 1
        buttonStroke.Parent = toggleButton

        local state = false
        
        local function updateToggle()
            if state then
                toggleButton.BackgroundColor3 = Color3.fromRGB(50, 255, 50)
                toggleButton.Text = "ON"
            else
                toggleButton.BackgroundColor3 = Color3.fromRGB(255, 50, 50)
                toggleButton.Text = "OFF"
            end
        end

        toggleButton.MouseButton1Click:Connect(function()
            state = not state
            updateToggle()
            callback(state)
            applyGunConfig()
        end)

        updateToggle()
        
        return toggleFrame
    end

    -- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏õ‡∏∏‡πà‡∏°‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÅ‡∏ö‡∏ö‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡∏¢‡∏°
    local yPos = 0
    createPremiumToggle("ESP Wallhack", "‡∏°‡∏≠‡∏á‡πÄ‡∏´‡πá‡∏ô‡∏®‡∏±‡∏ï‡∏£‡∏π‡∏ú‡πà‡∏≤‡∏ô‡∏Å‡∏≥‡πÅ‡∏û‡∏á", yPos, function(val) ESP_Enabled = val end)
    yPos = yPos + 80
    createPremiumToggle("Hitbox Expander", "‡∏ó‡∏≥‡πÉ‡∏´‡πâ Hitbox ‡πÉ‡∏´‡∏ç‡πà‡∏Ç‡∏∂‡πâ‡∏ô", yPos, function(val) Hitbox_Enabled = val end)
    yPos = yPos + 80
    createPremiumToggle("Infinite Ammo", "‡∏Å‡∏£‡∏∞‡∏™‡∏∏‡∏ô‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î", yPos, function(val) Ammo_Enabled = val end)
    yPos = yPos + 80
    createPremiumToggle("No Recoil", "‡∏õ‡∏∑‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏∞‡∏ó‡πâ‡∏≠‡∏ô", yPos, function(val) NoRecoil_Enabled = val end)
    yPos = yPos + 80
    createPremiumToggle("Auto Fire", "‡∏¢‡∏¥‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥", yPos, function(val) AutoFire_Enabled = val end)
    yPos = yPos + 80

    -- Custom Hitbox Size
    local hitboxFrame = Instance.new("Frame")
    hitboxFrame.Size = UDim2.new(1, 0, 0, 80)
    hitboxFrame.Position = UDim2.new(0, 0, 0, yPos)
    hitboxFrame.BackgroundColor3 = CurrentTheme.surface
    hitboxFrame.Parent = ContentFrame
    
    local hitboxCorner = Instance.new("UICorner")
    hitboxCorner.CornerRadius = UDim.new(0, 10)
    hitboxCorner.Parent = hitboxFrame
    
    local hitboxStroke = Instance.new("UIStroke")
    hitboxStroke.Color = CurrentTheme.primary
    hitboxStroke.Thickness = 1
    hitboxStroke.Parent = hitboxFrame

    local hitboxLabel = Instance.new("TextLabel")
    hitboxLabel.Size = UDim2.new(1, -20, 0, 30)
    hitboxLabel.Position = UDim2.new(0, 10, 0, 5)
    hitboxLabel.BackgroundTransparency = 1
    hitboxLabel.Text = "Hitbox Size: " .. HitboxSize
    hitboxLabel.TextColor3 = CurrentTheme.text
    hitboxLabel.TextScaled = true
    hitboxLabel.Parent = hitboxFrame

    local hitboxBox = Instance.new("TextBox")
    hitboxBox.Size = UDim2.new(1, -20, 0, 30)
    hitboxBox.Position = UDim2.new(0, 10, 0, 40)
    hitboxBox.BackgroundColor3 = CurrentTheme.background
    hitboxBox.TextColor3 = CurrentTheme.text
    hitboxBox.PlaceholderColor3 = CurrentTheme.text
    hitboxBox.PlaceholderText = "Enter hitbox size..."
    hitboxBox.TextScaled = true
    hitboxBox.Text = tostring(HitboxSize)
    hitboxBox.ClearTextOnFocus = false
    hitboxBox.Parent = hitboxFrame
    
    local hitboxBoxCorner = Instance.new("UICorner")
    hitboxBoxCorner.CornerRadius = UDim.new(0, 8)
    hitboxBoxCorner.Parent = hitboxBox

    hitboxBox.FocusLost:Connect(function()
        local val = tonumber(hitboxBox.Text)
        if val and val > 0 then
            HitboxSize = val
            hitboxLabel.Text = "Hitbox Size: " .. HitboxSize
        else
            hitboxBox.Text = tostring(HitboxSize)
        end
    end)

    yPos = yPos + 90

    -- Theme Selector
    local themeFrame = Instance.new("Frame")
    themeFrame.Size = UDim2.new(1, 0, 0, 100)
    themeFrame.Position = UDim2.new(0, 0, 0, yPos)
    themeFrame.BackgroundColor3 = CurrentTheme.surface
    themeFrame.Parent = ContentFrame
    
    local themeCorner = Instance.new("UICorner")
    themeCorner.CornerRadius = UDim.new(0, 10)
    themeCorner.Parent = themeFrame
    
    local themeStroke = Instance.new("UIStroke")
    themeStroke.Color = CurrentTheme.primary
    themeStroke.Thickness = 1
    themeStroke.Parent = themeFrame

    local themeLabel = Instance.new("TextLabel")
    themeLabel.Size = UDim2.new(1, -20, 0, 30)
    themeLabel.Position = UDim2.new(0, 10, 0, 5)
    themeLabel.BackgroundTransparency = 1
    themeLabel.Text = "UI Theme: " .. CurrentTheme.name
    themeLabel.TextColor3 = CurrentTheme.text
    themeLabel.TextScaled = true
    themeLabel.Parent = themeFrame

    local themeDropdown = Instance.new("TextButton")
    themeDropdown.Size = UDim2.new(1, -20, 0, 40)
    themeDropdown.Position = UDim2.new(0, 10, 0, 40)
    themeDropdown.BackgroundColor3 = CurrentTheme.background
    themeDropdown.Text = "Change Theme"
    themeDropdown.TextColor3 = CurrentTheme.text
    themeDropdown.TextScaled = true
    themeDropdown.Parent = themeFrame
    
    local themeDropdownCorner = Instance.new("UICorner")
    themeDropdownCorner.CornerRadius = UDim.new(0, 8)
    themeDropdownCorner.Parent = themeDropdown

    themeDropdown.MouseButton1Click:Connect(function()
        local themeNames = {}
        for name, _ in pairs(Themes) do
            table.insert(themeNames, name)
        end
        
        local currentIndex = 1
        for i, name in ipairs(themeNames) do
            if name == CurrentTheme.name then
                currentIndex = i
                break
            end
        end
        
        currentIndex = currentIndex % #themeNames + 1
        local newThemeName = themeNames[currentIndex]
        CurrentTheme = Themes[newThemeName]
        CurrentTheme.name = newThemeName
        
        themeLabel.Text = "UI Theme: " .. newThemeName
        applyThemeToUI(ScreenGui)
    end)

    -- Update ContentFrame Canvas Size
    ContentFrame.CanvasSize = UDim2.new(0, 0, 0, yPos + 110)

    -- ‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î UI
    ToggleButton.MouseButton1Click:Connect(function()
        MainFrame.Visible = not MainFrame.Visible
        if MainFrame.Visible then
            -- ‡πÄ‡∏≠‡∏ü‡πÄ‡∏ü‡∏Å‡∏ï‡πå‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î
            MainFrame.Size = UDim2.new(0, 0, 0, 0)
            MainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
            
            local tweenInfo = TweenInfo.new(0.5, Enum.EasingStyle.Back, Enum.EasingDirection.Out)
            local tween = TweenService:Create(MainFrame, tweenInfo, {
                Size = UDim2.new(0, 350, 0, 500),
                Position = UDim2.new(0.5, -175, 0.5, -250)
            })
            tween:Play()
        end
    end)

    CloseButton.MouseButton1Click:Connect(function()
        MainFrame.Visible = false
    end)

    -- ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏≤‡∏Å‡∏õ‡∏∏‡πà‡∏° Toggle
    local dragging = false
    local dragInput, dragStart, startPos

    ToggleButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = ToggleButton.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    ToggleButton.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement then
            dragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            local delta = input.Position - dragStart
            ToggleButton.Position = UDim2.new(
                startPos.X.Scale, 
                startPos.X.Offset + delta.X,
                startPos.Y.Scale, 
                startPos.Y.Offset + delta.Y
            )
        end
    end)

    return ScreenGui
end

-- ==========================
-- üöÄ ‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏µ‡∏Ñ‡∏≠‡∏ô‡πÄ‡∏ô‡∏Ñ‡∏ä‡∏±‡∏ô‡∏Ç‡∏±‡πâ‡∏ô‡∏™‡∏π‡∏á
-- ==========================
local characterConnections = {}
local uiCheckConnection

local function cleanupConnections()
    for _, connection in pairs(characterConnections) do
        if connection then connection:Disconnect() end
    end
    characterConnections = {}
    
    if uiCheckConnection then
        uiCheckConnection:Disconnect()
        uiCheckConnection = nil
    end
end

local function initializeSystem()
    cleanupConnections()
    
    local success, errorMsg = pcall(createHub)
    if not success then
        warn("‚ùå ‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á UI: " .. tostring(errorMsg))
        task.delay(2, initializeSystem)
        return
    end
    
    uiCheckConnection = RunService.Heartbeat:Connect(function()
        local playerGui = Player:FindFirstChild("PlayerGui")
        if not playerGui or not playerGui:FindFirstChild("HackHubUI") then
            warn("üîÑ UI ‡∏´‡∏≤‡∏¢! ‡∏Å‡∏π‡πâ‡∏Ñ‡∏∑‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥...")
            initializeSystem()
        end
    end)
    
    print("‚úÖ Ultimate Hack Hub ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß!")
end

local function setupCharacterHandling()
    characterConnections.characterAdded = Player.CharacterAdded:Connect(function(character)
        print("üéÆ ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏Å‡∏¥‡∏î‡πÅ‡∏•‡πâ‡∏ß!")
        character:WaitForChild("Humanoid")
        task.wait(1.5)
        initializeSystem()
    end)
    
    characterConnections.characterRemoving = Player.CharacterRemoving:Connect(function()
        print("üíÄ ‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏´‡∏≤‡∏¢...")
    end)
end

local function startHackSystem()
    print("üöÄ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö Ultimate Hack Hub...")
    
    if not Player.Character then
        Player.CharacterAdded:Wait()
    end
    
    setupCharacterHandling()
    initializeSystem()
    
    while true do
        local success, err = pcall(function()
            if not Player or not Player.Parent then
                error("‡∏ú‡∏π‡πâ‡πÄ‡∏•‡πà‡∏ô‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡πÄ‡∏Å‡∏°‡πÅ‡∏•‡πâ‡∏ß")
            end
        end)
        
        if not success then
            warn("‚ùå ‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏≥‡∏á‡∏≤‡∏ô: " .. tostring(err))
            break
        end
        
        task.wait()
    end
end

-- üî• ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö!
startHackSystem()
